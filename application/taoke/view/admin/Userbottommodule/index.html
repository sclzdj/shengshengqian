<div id="new-tab-pane" class="tab-pane active">
    <div class="row data-table-toolbar">
        <div class="col-sm-12">
            <div class="toolbar-btn-action">
            </div>
        </div>
    </div>
    <div>
        <table class="table table-builder table-hover table-bordered table-striped js-table-checkable">
            <div class="find-content">

                <div class="find-content-r" style="width: 100%;">
                    <!-- 编辑模块 -->
                    <!-- <div class="editdiv editButtons"> -->
                        <div class="find-content-r-content">
                            <div class="gridly edit-buttons-div" style="width: 80%;">
                                {if condition="count($list) > 0"}
                                    {foreach name='list' item='v'}
                                    <div id="{$v.id}" class="ip6-module-edit-div">
                                        <div class="ip6-module-edit-img">
                                            <img src="{:getRequestHost()}\{$v.path}">
                                            <a style="z-index:0;" class="edit-buttons" onclick="editButtons({$v.id});" href="javascript:;"><img src="{:getRequestHost()}\static\admin\img\find\edit.png"></a>
                                            <a style="z-index:0;" class="delete-buttons" onclick="deleteButtons({$v.id});" href="javascript:;"><img src="{:getRequestHost()}\static\admin\img\find\delete.png"></a>
                                        </div>
                                        <div class="ip6-edit-title">{$v.title}</div>
                                    </div>
                                    {/foreach}
                                {/if}
                            </div>
                            
                        </div>
                        <div class="find-content-r-footer">
                            <button  onclick="addButtons();" class="btn btn-minw btn-primary ajax-post" type="button">添加</button>
                        </div>
                    <!-- </div> -->
                    <!-- 编辑模块end -->
                </div>
            </div>
        </table>
    </div>
    <div class="data-table-toolbar">
        <div class="row">
            <div class="col-sm-12">
            </div>
        </div>
    </div>
</div>
<!-- jquery  gridly支持-->
<script src="{:getRequestHost()}\static\admin\jquery-gridly\javascripts\jquery.min.js" type="text/javascript"></script>
<script type='text/javascript'>
    var jQ=jQuery.noConflict()
</script>
<!-- swiper -->
<script src="{:getRequestHost()}\static\admin\swiper\dist\js\swiper.min.js"></script>
<!-- gridly -->
<script src="{:getRequestHost()}\static\admin\jquery-gridly\javascripts\jquery.gridly.js" type="text/javascript"></script>
<script type='text/javascript'>
    // 初始化
    window.onload=function(){
        newGridly(46,10,15);
    };
    var obj = document.getElementById('tab-pane');
    var pobj = obj.parentNode;
    var newobj = document.getElementById('new-tab-pane');
    obj.style.display = 'none';
    pobj.appendChild(newobj); 
   
    // 实例化gridly
    // Generated by CoffeeScript 1.6.3
    function newGridly(base,gutter,columns){
        jQ('.gridly').gridly({
          base: base,
          gutter: gutter,//行高
          columns: columns,
          callbacks:{ reordering: reordering , reordered: reordered }
        });
    }
    var reordering =function($elements){
    // Called before the drag and drop starts with the elements in their starting position.
    //alert('start');
    };
 
    //拖动后回调
    var reordered =function($elements){
        // Called after the drag and drop ends with the elements in their ending position.
        // 当前对象
        var obj =this.reordered.arguments[0];
        var arr = new Array();
        $.each(obj,function(key,value){
            arr[key] = value.id;
        });
        $.ajax({
            type: "POST",
            url: '{:getRequestHost()}/admin.php/taoke/Userbottommodule/editWeight.html',
            data:{data:arr},
            dataType: 'json',
            cache: false,
            async: true,
            success: function(data) {
                console.log(data);
                if(data[0] == 200){
                }else{
                    layer.msg(data[1]);
                }
            }
        });
    };
    // 操作模块（按钮）
    function addButtons(){
        layer.open({
            type: 2,
            title: '新增模块',
            shadeClose: true,
            shade: 0.8,
            area: ['80%', '90%'],
            content: '{:getRequestHost()}/admin.php/taoke/Userbottommodule/add.html',
            end : function(){
              layer.load(0, {shade: false});
              location.reload();
            }
          }); 
    }
    function editButtons(id){
        layer.open({
          type: 2,
          title: '编辑模块',
          shadeClose: true,
          shade: 0.8,
          area: ['80%', '90%'],
          content: '{:getRequestHost()}/admin.php/taoke/Userbottommodule/edit/id/'+id+'.html',
          end : function(){
              layer.load(0, {shade: false});
              location.reload();
          }
        });
    }
    function deleteButtons(id){
        var index2 = layer.confirm('确认删除该按钮？', {
          btn: ['确认','取消']
        }, function(){
            layer.close(index2);
            var index = layer.load(0, {shade: false});
            $.ajax({
                type: "POST",
                url: '{:getRequestHost()}/admin.php/taoke/Userbottommodule/del/id/'+id+'.html',
                data:{},
                dataType: 'json',
                cache: false,
                async: true,
                success: function(data) {
                    if(data[0] == 200){
                        location.reload();
                    }else{
                        layer.close(index);
                        layer.msg(data[1]);
                    }
                }
            });
        }, function(){
        });
    }
</script>
